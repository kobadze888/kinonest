// src/lib/utils.js-ის შიგთავსი

/**
 * ქმნის URL-ისთვის უსაფრთხო "slug"-ს სტრიქონიდან (რუსულის ტრანსლიტერაციით)
 * @param {string} text - შემომავალი ტექსტი (მაგ: "Франкенштейн")
 * @returns {string} - URL-ისთვის მზა ტექსტი (მაგ: "frankenshteyn")
 */
export function slugify(text) {
  if (!text) return '';

  const a = {
    "а": "a", "б": "b", "в": "v", "г": "g", "д": "d", "е": "e", "ё": "yo", "ж": "zh",
    "з": "z", "и": "i", "й": "y", "к": "k", "л": "l", "м": "m", "н": "n", "о": "o",
    "п": "p", "р": "r", "с": "s", "т": "t", "у": "u", "ф": "f", "х": "h", "ц": "c",
    "ч": "ch", "ш": "sh", "щ": "shch", "ъ": "", "ы": "y", "ь": "", "э": "e",
    "ю": "yu", "я": "ya",
    // დავამატოთ ქართულიც, ყოველი შემთხვევისთვის
    "ა": "a", "ბ": "b", "გ": "g", "დ": "d", "ე": "e", "ვ": "v", "ზ": "z", "თ": "t",
    "ი": "i", "კ": "k", "ლ": "l", "მ": "m", "ნ": "n", "ო": "o", "პ": "p", "ჟ": "zh",
    "რ": "r", "ს": "s", "ტ": "t", "უ": "u", "ფ": "f", "ქ": "q", "ღ": "gh", "ყ": "k",
    "შ": "sh", "ჩ": "ch", "ც": "ts", "ძ": "dz", "წ": "ts", "ჭ": "ch", "ხ": "kh",
    "ჯ": "j", "ჰ": "h"
  };

  return text.toString().toLowerCase()
    .trim()
    .replace(/[^\w\s-]/g, '') // წაშალე ყველა არა-სიტყვა სიმბოლო
    .replace(/[\s_-]+/g, '-') // ჩაანაცვლე ინტერვალები და ტირეები ერთით
    .replace(/^-+|-+$/g, '') // წაშალე ტირეები დასაწყისში და ბოლოში
    .split('')
    .map(char => a[char] || char) // ტრანსლიტერაცია
    .join('');
}